!function(e,r,t,n){"use strict";var o=e.Sandbox,i="1.3.2",u=function(e){if("object"!=typeof e&&"function"!=typeof e)return e;for(var r,t,n=arguments.length,o=1;n>o;o++){t=arguments[o];for(r in t)t.hasOwnProperty(r)&&(e[r]=t[r])}return e},c=function(e,r){return function(){e.apply(r||{},arguments)}},f=function(e){return"function"==typeof e},s=function(e,r,t){if(!e.hasOwnProperty(r)&&!e[r])return t;var n=e[r];return f(n)?n():n},d=function(e,r){return function(t){r.reject(a(e,t))}},a=function(e,r){if("undefined"==typeof e)throw new Error("require.Sandbox: internal error, _makeError [no-sb]");r||(r={});var t={type:r.type||"",sandbox:e};return"undefined"!=typeof r.requireType||"undefined"!=typeof r.requireModules?(t.type="requireError",t.err=r):t=u(t,r),t},p=function(r){var t=s(this,"load"),n=new h,o=function(e){return f(this.test)&&!0!==this.test.call({},e,this)?void n.reject(a(this,{type:"testFailed"})):(r.wrapped=e,void n.resolve(this))};try{e([t],c(o,this),d(this,n))}catch(i){n.reject(a(this,{type:"requireFailed",exception:i}))}return n},h=function(){var e,r=[],t=[],n="pending",o=function(){if("pending"!==n){for(var o,i="rejected"===n?t:r;0<i.length;)o=i.shift(),o.call({},e);r=[],t=[]}};this.then=function(e,n){return"function"==typeof e&&r.push(e),"function"==typeof n&&t.push(n),o(),this},this["catch"]=function(e){return this.then(void 0,e)},this.reject=function(r){return"pending"===n&&(n="rejected",e=r,o()),this},this.resolve=function(r){return"pending"===n&&(n="resolved",e=r,o()),this},this.state=function(){return n}},w={pending:"pending",required:"required",error:"error"},y=function(e){e||(e={});var r={wrapped:void 0};this._sb=r;var t=!1;this._require=function(){t=!0;var e=p.call(this,r);return e.then(c(function(){this.state=w.required},this))["catch"](c(function(e){this.state=w.error,this.error=e},this)),e},this._execute=function(e){if(!t)throw new Error("require.Sandbox: No module loaded yet, unable to access it");if(!e)throw new Error("require.Sandbox: No options for .execute given");if(!e.name)throw new Error("require.Sandbox: No .name for .execute given");var n=new h;e=u({context:{},arguments:[]},e);var o=!!e.forceExecute;try{var i;i=o||"function"==typeof r.wrapped[e.name]?r.wrapped[e.name].apply(e.context,e.arguments):r.wrapped[e.name],n.resolve({result:i,sandbox:this})}catch(c){this.error=a(this,{type:"executeFailed",exception:c}),n.reject(this.error)}return n},u(this,e)};u(y.prototype,{load:null,test:function(){return!0},state:w.pending,error:void 0,require:function(){return this._require.apply(this,arguments)},execute:function(){return this._execute.apply(this,arguments)}}),y.extend=function(e,r){var t,n=this;t=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return n.apply(this,arguments)},t=u(t,n,r);var o=function(){this.constructor=t};return o.prototype=n.prototype,t.prototype=new o,e&&u(t.prototype,e),t.__super__=n.prototype,t},y.noConflict=function(){return e.Sandbox=o,y},y.test={undefined:function(e){return"undefined"!=typeof e},"null":function(e){return null!==e}};var l={window:void 0,require:void 0},v={window:function(){return!0},require:function(){return!0}};y.patch={window:function(){"undefined"==typeof l.window&&(l.window=t.onerror,t.onerror=v.window)},require:function(){"undefined"==typeof l.require&&(l.require=e.onError,e.onError=v.require)}},y.restore={window:function(){"undefined"!=typeof l.window&&(t.onerror=l.window,l.window=void 0)},require:function(){"undefined"!=typeof l.require&&(e.onError=l.require,l.require=void 0)}},e.Sandbox=y,e.Sandbox.VERSION=i,n([],function(){return e.Sandbox})}(require,requirejs,window,define);