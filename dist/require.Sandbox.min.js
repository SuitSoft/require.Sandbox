!function(e,r,n,t){"use strict";var o=e.Sandbox,i="1.2.0",u=function(e){if("object"!=typeof e&&"function"!=typeof e)return e;for(var r,n,t=arguments.length,o=1;t>o;o++){n=arguments[o];for(r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e},c=function(e,r){return function(){e.apply(r||{},arguments)}},f=function(e){return"function"==typeof e},s=function(e,r,n){if(!e.hasOwnProperty(r)&&!e[r])return n;var t=e[r];return f(t)?t():t},d=function(e,r){return function(n){r.reject(a(e,n))}},a=function(e,r){if("undefined"==typeof e)throw new Error("require.Sandbox: internal error, _makeError [no-sb]");r||(r={});var n={type:r.type||"",sandbox:e};return"undefined"!=typeof r.requireType||"undefined"!=typeof r.requireModules?(n.type="requireError",n.err=r):n=u(n,r),n},p=function(r){var n=s(this,"load"),t=new h,o=function(e){return f(this.test)&&!0!==this.test.call({},e,this)?void t.reject(a(this,{type:"testFailed"})):(r.wrapped=e,void t.resolve(this))};try{e([n],c(o,this),d(this,t))}catch(i){t.reject(a(this,{type:"requireFailed",exception:i}))}return t},h=function(){var e,r=[],n=[],t="pending",o=function(){if("pending"!==t){for(var o,i="rejected"===t?n:r;0<i.length;)o=i.shift(),o.call({},e);r=[],n=[]}};this.then=function(e,t){return"function"==typeof e&&r.push(e),"function"==typeof t&&n.push(t),o(),this},this["catch"]=function(e){return this.then(void 0,e)},this.reject=function(r){return"pending"===t&&(t="rejected",e=r,o()),this},this.resolve=function(r){return"pending"===t&&(t="resolved",e=r,o()),this},this.state=function(){return t}},w={pending:"pending",required:"required",error:"error"},y=function(e){e||(e={});var r={wrapped:void 0};this._sb=r;var n=!1;this._require=function(){n=!0;var e=p.call(this,r);return e.then(c(function(){this.state=w.required},this))["catch"](c(function(e){this.state=w.error,this.error=e},this)),e},this._execute=function(e){if(!n)throw new Error("require.Sandbox: No module loaded yet, unable to access it");if(!e)throw new Error("require.Sandbox: No options for .execute given");if(!e.name)throw new Error("require.Sandbox: No .name for .execute given");var t=new h;e=u({context:{},arguments:[]},e);var o=!!e.forceExecute;try{var i;i=o||"function"==typeof r.wrapped[e.name]?r.wrapped[e.name].apply(e.context,e.arguments):r.wrapped[e.name],t.resolve({result:i,sandbox:this})}catch(c){this.error=a(this,{type:"executeFailed",exception:c}),t.reject(this.error)}return t},u(this,e)};u(y.prototype,{load:null,test:function(){return!0},state:w.pending,error:void 0,require:function(){return this._require.apply(this,arguments)},execute:function(){return this._execute.apply(this,arguments)}}),y.extend=function(e,r){var n,t=this;n=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return t.apply(this,arguments)},n=u(n,t,r);var o=function(){this.constructor=n};return o.prototype=t.prototype,n.prototype=new o,e&&u(n.prototype,e),n.__super__=t.prototype,n},y.noConflict=function(){return e.Sandbox=o,y},y.test={undefined:function(e){return"undefined"!=typeof e},"null":function(e){return null!==e}};var l={window:void 0,require:void 0},v={window:function(){return!0},require:function(){return!0}};y.patch={window:function(){"undefined"==typeof l.window&&(l.window=n.onerror,n.onerror=v.window)},require:function(){"undefined"==typeof l.require&&(l.require=e.onError,e.onError=v.require)}},y.restore={window:function(){"undefined"!=typeof l.window&&(n.onerror=l.window,l.window=void 0)},require:function(){"undefined"!=typeof l.require&&(e.onError=l.require,l.require=void 0)}},e.Sandbox=y,e.Sandbox.VERSION=i,t([],function(){return e.Sandbox})}(require||function(){},requirejs||{},window||{},define||function(){});