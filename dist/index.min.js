!function(e,r,n,t){"use strict";var o=e.Sandbox,i=function(e){if("object"!=typeof e)return e;for(var r,n,t=arguments.length,o=1;t>o;o++){n=arguments[o];for(r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e},u=function(e,r){return function(){e.apply(r||{},arguments)}},c=function(e){return"function"==typeof e},f=function(e,r,n){if(!e.hasOwnProperty(r)&&!e[r])return n;var t=e[r];return c(t)?t():t},d=function(e,r){return function(n){r.reject(s(e,n))}},s=function(e,r){if("undefined"==typeof e)throw new Error("require.Sandbox: internal error, _makeError [no-sb]");r||(r={});var n={type:r.type||"",sandbox:e};return"undefined"!=typeof r.requireType||"undefined"!=typeof r.requireModules?(n.type="requireError",n.err=r):n=i(n,r),n},a=function(r){var n=f(this,"load"),t=new p,o=function(e){return c(this.test)&&!0!==this.test.call({},e,this)?void t.reject(s(this,{type:"testFailed"})):(r.wrapped=e,void t.resolve(this))};try{e([n],u(o,this),d(this,t))}catch(i){t.reject(s(this,{type:"requireFailed",exception:i}))}return t},p=function(){var e,r=[],n=[],t="pending",o=function(){if("pending"!==t){for(var o,i="rejected"===t?n:r;0<i.length;)o=i.shift(),o.call({},e);r=[],n=[]}};this.then=function(e,t){return"function"==typeof e&&r.push(e),"function"==typeof t&&n.push(t),o(),this},this["catch"]=function(e){return this.then(void 0,e)},this.reject=function(r){return"pending"===t&&(t="rejected",e=r,o()),this},this.resolve=function(r){return"pending"===t&&(t="resolved",e=r,o()),this},this.state=function(){return t}},h={pending:"pending",required:"required",error:"error"},w=function(e){e||(e={});var r={wrapped:void 0};this._sb=r;var n=!1;this.require=function(){n=!0;var e=a.call(this,r);return e.then(u(function(){this.state=h.required},this))["catch"](u(function(e){this.state=h.error,this.error=e},this)),e},this.execute=function(e){if(!n)throw new Error("require.Sandbox: No module loaded yet, unable to access it");if(!e)throw new Error("require.Sandbox: No options for .execute given");if(!e.name)throw new Error("require.Sandbox: No .name for .execute given");var t=new p;e=i({context:{},arguments:[]},e);try{t.resolve(r.wrapped[e.name].apply(e.context,e.arguments))}catch(o){t.reject(s(this,{type:"executeFailed",exception:o}))}return t},i(this,e)};i(w.prototype,{load:null,test:function(){return!0},state:h.pending,error:void 0}),w.extend=function(e,r){var n,t=this;n=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return t.apply(arguments)},n=i(n,t,r);var o=function(){this.constructor=n};return o.prototype=t.prototype,n.prototype=new o,e&&i(n.prototype,e),n.__super__=t.prototype,n},w.noConflict=function(){return e.Sandbox=o,w},w.test={undefined:function(e){return"undefined"!=typeof e},"null":function(e){return null!==e}};var y={window:void 0,require:void 0},l={window:function(){return!0},require:function(){return!0}};w.patch={window:function(){"undefined"==typeof y.window&&(y.window=n.onerror,n.onerror=l.window)},require:function(){"undefined"==typeof y.require&&(y.require=e.onError,e.onError=l.require)}},w.restore={window:function(){"undefined"!=typeof y.window&&(n.onerror=y.window,y.window=void 0)},require:function(){"undefined"!=typeof y.require&&(e.onError=y.require,y.require=void 0)}},e.Sandbox=w,t([],function(){return e.Sandbox})}(require||function(){},requirejs||{},window||{},define||function(){});